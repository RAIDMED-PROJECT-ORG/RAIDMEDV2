"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7181],{31583:function(e,t,n){n.d(t,{j:function(){return s}});var r=n(85893),i=(n(67294),n(86010)),a=n(74606),o=n(55718),s=function(e){var t=e.color,n=void 0===t?"default":t,s=e.label,c=e.className,l=(0,i.Z)("flex justify-start",c&&c),u=(0,i.Z)("grow-0 shrink-0 w-tc20 h-tc20 mr-tc10 mt-[1px]",{default:"text-tcGray-600",warning:"text-tcYellow-600",danger:"text-tcRed-600",success:"text-tcGreen-400"}[n]);return(0,r.jsxs)("div",{className:l,children:[(0,r.jsx)(o.oJ,{name:"exclamation-square",className:u}),(0,r.jsx)(a.Tk,{as:"span",weight:"medium",color:"inherit",children:s})]})}},68441:function(e,t,n){n.d(t,{o:function(){return u}});var r=n(47568),i=n(97582),a=n(85893),o=n(67294),s=n(55718),c=n(84095),l=n(34665),u=function(e){var t=e.id,n=e.value,u=e.defaultValue,d=e.name,x=e.disabled,f=e.readOnly,h=e.password,m=e.showPassword,j=void 0!==m&&m,v=e.copy,p=e.placeholder,g=e.error,N=e.success,b=e.loading,y=e.className,I=e.inputRef,k=e.onChange,w=void 0===k?function(){}:k,T=e.onClick,C=void 0===T?function(){}:T,A=e.onFocus,E=void 0===A?function(){}:A,_=e.onCopy,S=void 0===_?function(){}:_,O=(0,o.useRef)(null),z=I||O,V=(0,o.useState)(!1),D=V[0],M=V[1],G=(0,o.useState)(j),R=G[0],J=G[1],Z=x||b,L=["flex gap-tc10",y],P=["relative flex rounded-tc3 cursor-text border rounded-tc6 w-full","focus-within:ring-2 ring-black",Z&&"bg-tcGray-200 cursor-not-allowed",f&&"bg-tcPurple-100",g&&"border-tcRed-600",N&&"border-tcGreen-400"],Q=["px-tc15 py-tc10 outline-none bg-transparent w-full grow-1",Z&&"cursor-not-allowed",b&&"opacity-0"];return(0,o.useEffect)((function(){var e=setTimeout((function(){M(!1)}),2e3);return function(){return clearTimeout(e)}}),[D]),(0,a.jsxs)("div",{className:L.join(" "),children:[(0,a.jsxs)("div",{className:P.join(" "),children:[b&&(0,a.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 left-tc15",children:(0,a.jsx)(l.O,{className:"w-tc20 h-tc20",variant:"primary"})}),(0,a.jsx)("input",{ref:z,type:h&&!R?"password":"text",id:t,value:n,defaultValue:u,name:d,disabled:Z,readOnly:f,placeholder:p,className:Q.join(" "),onChange:function(e){return!x&&w(e)},onClick:function(e){return!x&&C(e)},onFocus:function(e){return!x&&E(e)}}),h&&(0,a.jsx)("button",{className:"w-tc44 h-tc44 flex items-center justify-center grow-0 shrink-0 text-tcPurple-400 hover:text-tcPurple-800 focus:text-tcPurple-800",onClick:function(){!Z&&J(!R)},children:R?(0,a.jsx)(s.oJ,{name:"eye-slash"}):(0,a.jsx)(s.oJ,{name:"eye"})})]}),v&&(0,a.jsx)(c.r0,{iconName:D?"check":"copy",iconOnly:!0,className:"",size:"large",isDisabled:Z,onClick:(0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return Z?[2]:[4,window.navigator.clipboard.writeText((null===(e=z.current)||void 0===e?void 0:e.value)||"")];case 1:return t.sent(),M(!1),M(!0),S(),[2]}}))}))})]})}},48939:function(e,t,n){n.d(t,{N3:function(){return o},en:function(){return a},li:function(){return i}});var r="invitationCode",i=function(){var e=sessionStorage.getItem(r)||"";try{if(e.startsWith("{"))return JSON.parse(e)}catch(t){return console.error("failed to parse invitation code",e),{code:"",type:"org"}}return{code:e,type:"org"}},a=function(e,t){return sessionStorage.setItem(r,JSON.stringify({code:e,type:t}))},o=function(){return sessionStorage.removeItem(r)}},57181:function(e,t,n){n.d(t,{i:function(){return D}});var r,i=n(26042),a=n(85893),o=n(67294),s=n(48939),c=n(73606),l=n(41821),u=n(12030),d=n(47568),x=n(97582),f=n(11163),h=n(80314),m=n(48264),j=n(84095),v=n(61340),p=n(55103),g=n(6822),N=function(){return(0,o.useEffect)((function(){(0,s.N3)()}),[]),(0,a.jsx)(p.DQ,{children:(0,a.jsxs)("div",{className:"max-w-[700px] mx-auto",children:[(0,a.jsx)(h.e,{children:(0,a.jsx)(m.r,{as:"h1",label:"User limit reached"})}),(0,a.jsxs)(h.z,{children:[(0,a.jsx)("p",{className:"text-tc20",children:"This trial organization has reached its limit of users able to join. Please reach out to your organization\u2019s admin to upgrade."}),(0,a.jsxs)("p",{className:"mt-tc30 text-tc18",children:["If you have any question, don\u2019t hesitate to"," ",(0,a.jsx)("a",{className:"text-tcGreen-600",href:"https://hub.docker.com/support/contact?topic=Testcontainers",children:"contact us"}),"."]})]})]})})},b=n(74606),y=n(41664),I=n.n(y),k=function(){return(0,o.useEffect)((function(){(0,s.N3)()}),[]),(0,a.jsx)(p.DQ,{children:(0,a.jsxs)("div",{className:"max-w-[700px] mx-auto",children:[(0,a.jsx)(h.e,{children:(0,a.jsx)(m.r,{as:"h1",label:"Invalid invitation code"})}),(0,a.jsxs)(h.z,{children:[(0,a.jsx)(b.Tk,{size:"xl",label:"It seems that we don't recognise your invitation code."}),(0,a.jsx)(b.Tk,{className:"mt-tc-m mb-tc-m",size:"xl",label:"Sorry, but we can't let you in yet..."}),(0,a.jsx)(I(),{href:"https://testcontainers.cloud",children:(0,a.jsx)("a",{className:"inline-block",children:(0,a.jsx)(j.r0,{label:"Can I get access now?"})})})]})]})})};!function(e){e.ACTIVATED="activated",e.INVALID="invalid",e.MAXIMUM_MEMBERS="maximum_members"}(r||(r={}));var w,T=function(e){var t=e.children;return(0,a.jsx)(p.DQ,{children:(0,a.jsxs)("div",{className:"max-w-[700px] mx-auto",children:[(0,a.jsx)(h.e,{children:(0,a.jsx)(m.r,{as:"h1",label:"Join organization"})}),(0,a.jsx)(h.z,{children:t})]})})},C=function(e){var t=e.invitation,n=e.onJoin,r=e.onCancel,i=e.loading;return(0,a.jsxs)("div",{className:"flex flex-col gap-tc10",children:[(0,a.jsxs)("p",{className:"text-tc20",children:["You have been invited to join ",(0,a.jsx)("b",{children:t.org.name})," organization."]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(j.hE,{className:"mt-tc10",children:[(0,a.jsx)(j.r0,{label:"Join ".concat(t.org.name),onClick:n,isLoading:i}),(0,a.jsx)(j.r0,{label:"Cancel",variant:"outline",onClick:r})]})})]})},A=function(e){var t=e.invitation,n=e.onOk,r=e.loading;return(0,a.jsxs)("div",{className:"flex flex-col gap-tc10",children:[(0,a.jsxs)("p",{className:"text-tc20",children:["You already a member of ",(0,a.jsx)("b",{children:t.org.name}),", nothing to do."]}),(0,a.jsx)("div",{children:(0,a.jsx)(j.hE,{className:"mt-tc10",children:(0,a.jsx)(j.r0,{label:"Ok, got it!",onClick:n,isLoading:r})})})]})},E=function(e){var t,n=e.code,i=e.type,c=(0,g.X)(),l=(0,f.useRouter)(),h=(0,o.useState)(),m=h[0],j=h[1],p=v.d.invitations.findOne.useQuery({code:n,type:i}),b=p.data,y=p.isLoading,I=v.d.orgs.current.useQuery({context:null===b||void 0===b||null===(t=b.org)||void 0===t?void 0:t.id},{enabled:!y&&!!(null===b||void 0===b?void 0:b.org)}),w=I.data,E=I.isLoading,_=v.d.members.join.useMutation({onSuccess:function(){var e=(0,d.Z)((function(e,t){var n,i;return(0,x.__generator)(this,(function(o){return n=t.code,i=t.type,e.status===r.MAXIMUM_MEMBERS?(j((0,a.jsx)(N,{})),[2]):e.status===r.INVALID?(j((0,a.jsx)(k,{})),[2]):e.status===r.ACTIVATED?(c.track("invitation_activated",{code:n,type:i,source:"org"===i?20===n.length?"org":"aj":i}),(0,s.N3)(),[2,l.push("/api/auth/login")]):[2]}))}));return function(t,n){return e.apply(this,arguments)}}()}),S=_.mutate,O=_.isLoading;if(y||E)return(0,a.jsx)(u.Z,{text:"Checking invitation..."});if(!(null===b||void 0===b?void 0:b.org))return(0,a.jsx)(k,{});if(m)return m;var z=function(){(0,s.N3)(),l.reload()};return(null===w||void 0===w?void 0:w.id.tcc)===b.org.id?(0,a.jsx)(T,{children:(0,a.jsx)(A,{invitation:b,onOk:function(){S({code:n,type:i}),z()},loading:O})}):(0,a.jsx)(T,{children:(0,a.jsx)(C,{invitation:b,onJoin:function(){S({code:n,type:i})},onCancel:z,loading:O})})},_=n(34665),S=n(68441),O=n(31583),z=function(){var e=(0,o.useState)(!1),t=e[0],n=e[1],r=(0,o.useState)(""),i=r[0],s=r[1],c=(0,o.useState)(void 0),l=c[0],u=c[1],g=(0,f.useRouter)(),N=v.d.orgs.create.useMutation({onSuccess:function(){return g.push("/api/auth/login")},onError:function(e){var t;n(!1),"FORBIDDEN"===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.code)?u((0,a.jsx)(w,{})):u((0,a.jsx)(k,{}))}}),y=function(e){return!e||e.length<2||e.length>250},I=function(){var e=(0,d.Z)((function(){return(0,x.__generator)(this,(function(e){switch(e.label){case 0:return n(!0),[4,N.mutate({name:i})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),k=function(){return(0,a.jsxs)(b.Tk,{children:["Failed to create the organization. If the error persists"," ",(0,a.jsx)("a",{href:"https://hub.docker.com/support/contact?topic=Testcontainers",target:"_blank",rel:"noreferrer",children:"contact us"}),"."]})},w=function(){return(0,a.jsxs)(b.Tk,{children:["You already created an organization, please"," ",(0,a.jsx)("a",{className:"text-tcGreen-600",href:"https://hub.docker.com/support/contact?topic=Testcontainers",target:"_blank",rel:"noreferrer",children:"reach out to support"}),"."]})};return(0,a.jsx)(p.DQ,{children:(0,a.jsxs)("div",{className:"max-w-[700px] mx-auto",children:[(0,a.jsx)(h.e,{children:(0,a.jsx)(m.r,{as:"h1",label:"Create Organization"})}),(0,a.jsxs)(h.z,{children:[t&&(0,a.jsx)("div",{className:"flex items-center justify-center py-tc20",children:(0,a.jsx)(_.O,{variant:"primary"})}),!t&&(0,a.jsxs)("div",{className:"flex flex-col gap-tc20",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-tc10",children:[(0,a.jsx)("p",{className:"text-tcGray-600 font-rubik",children:"Company name"}),(0,a.jsx)(S.o,{className:"grow",value:i,name:"name",onChange:function(e){s(e.target.value),u(void 0)}}),i&&y(i)&&(0,a.jsx)(O.j,{color:"warning",label:"The organization name must be between 2 and 250 characters"}),l&&(0,a.jsx)(O.j,{color:"danger",label:l})]}),(0,a.jsx)("a",{className:"inline-block",children:(0,a.jsx)(j.r0,{label:"Create",onClick:I,isDisabled:y(i)})}),(0,a.jsx)(b.Tk,{font:"rubik",className:"text-tcGray-800",children:"Trying to join an existing organization? Ask your admin for an invitation link"})]})]})]})})},V=n(10646);!function(e){e[e.CHECKING_INVITATION=0]="CHECKING_INVITATION",e[e.INVITATION_ACTIVATED=1]="INVITATION_ACTIVATED",e[e.INVITATION_ABSENT=2]="INVITATION_ABSENT"}(w||(w={}));var D=function(e){return function(t){var n=(0,V.Vb)().webAccountContextSelectionRedirect,r=void 0!==n&&n,d=(0,c.aF)(),x=d.user,f=(d.isLoading,(0,o.useState)((function(){return(0,s.li)()}))),h=f[0],m=(f[1],(0,o.useState)(0)),j=m[0],v=m[1],p=(0,o.useMemo)((function(){return(0,l.Ip)(x)}),[x]);if((0,o.useEffect)((function(){v(p?1:2)}),[p]),null===h||void 0===h?void 0:h.code)return(0,a.jsx)(E,{code:h.code,type:h.type});switch(j){case 1:return(0,a.jsx)(e,(0,i.Z)({},t));case 0:return(0,a.jsx)(u.Z,{text:"Checking invitation..."});default:return r?(0,a.jsx)(e,(0,i.Z)({},t)):(0,a.jsx)(z,{})}}}}}]);